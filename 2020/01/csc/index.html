<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>üôèüèº Cloud Security Commandments | @me - Nathan Getty Blog</title><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noodp" />
<meta name="Description" content="Let&#39;s make sure to follow these commandments in AWS"><link rel="prev" href="/2020/01/cross-account-scannin/" /><link rel="canonical" href="/2020/01/csc/" />
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff"><meta property="og:title" content="üôèüèº Cloud Security Commandments" />
<meta property="og:description" content="Let&#39;s make sure to follow these commandments in AWS" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2020/01/csc/" />
<meta property="article:published_time" content="2020-01-28T21:57:40+08:00" />
<meta property="article:modified_time" content="2020-01-28T21:57:40+08:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="üôèüèº Cloud Security Commandments"/>
<meta name="twitter:description" content="Let&#39;s make sure to follow these commandments in AWS"/>
<script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "üôèüèº Cloud Security Commandments",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "\/2020\/01\/csc\/"
        },"image": {
                "@type": "ImageObject",
                "url": "\/cover.png",
                "width":  800 ,
                "height":  600 
            },"genre": "posts","keywords": "cloud, security, policy","wordcount":  883 ,
        "url": "\/2020\/01\/csc\/","datePublished": "2020-01-28T21:57:40\x2b08:00","dateModified": "2020-01-28T21:57:40\x2b08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
                "@type": "Organization",
                "name": "xxxx",
                "logo": {
                "@type": "ImageObject",
                "url": "\/logo.png",
                "width":  127 ,
                "height":  40 
                }
            },"description": "Let\x27s make sure to follow these commandments in AWS"
    }
    </script><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/css/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/css/lib/forkawesome/forkawesome.min.css"><link rel="stylesheet" href="/css/lib/animate/animate.min.css"></head>
    <body><script>
            if (!window.localStorage || !window.localStorage.getItem('theme')) {
                window.isDark = 'dark' === 'dark';
            } else {
                window.isDark = (window.localStorage && window.localStorage.getItem('theme')) === 'dark';
            }
            window.isDark && document.body.classList.add('dark-theme');
        </script><div class="wrapper"><nav class="navbar">
    <div class="navbar-container">
        <div class="navbar-header animated bounceIn">
            <a href="/">@me - Nathan Getty Blog</a>
        </div>
        <div class="navbar-menu"><a class="menu-item" href="/posts" title="">Posts</a><a class="menu-item" href="/tags" title="">Tags</a><a class="menu-item" href="/about" title="">About</a><a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a>
        </div>
    </div>
</nav><nav class="navbar-mobile">
    <div class="navbar-container">
        <div class="navbar-header">
            <div class="navbar-header-title animated bounceIn">
                <a href="/">@me - Nathan Getty Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="navbar-menu" id="mobile-menu"><a class="menu-item" href="/posts" title="">Posts</a><a class="menu-item" href="/tags" title="">Tags</a><a class="menu-item" href="/about" title="">About</a><a href="javascript:void(0);" class="theme-switch"><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a>
        </div>
    </div>
</nav>
<main class="main">
                <div class="container"><article class="page"><h1 class="post-title animated flipInX">üôèüèº Cloud Security Commandments</h1><div class="post-meta">
            <div class="post-meta-main"><a class="author" href="https://github.com/getsec" rel="author" target="_blank">
                    <i class="fas fa-user-circle fa-fw"></i>Nathan Getty
                </a>&nbsp;</div>
            <div class="post-meta-other"><i class="far fa-calendar-alt fa-fw"></i><time datetime=2020-01-28>2020-01-28</time>&nbsp;
                <i class="fas fa-pencil-alt fa-fw"></i>about 883 words&nbsp;
                <i class="far fa-clock fa-fw"></i>5 min&nbsp;</div>
        </div><div class="post-toc" id="post-toc">
                <h2 class="post-toc-title">Contents</h2>
                <div class="post-toc-content"><nav id="TableOfContents">
  <ul>
    <li><a href="#preface">Preface</a></li>
    <li><a href="#the-list">The List</a></li>
    <li><a href="#thou-shalt-use-encryption-everywhere">Thou shalt use encryption everywhere.</a></li>
    <li><a href="#thou-shalt-not-create-public-facing-infrastructure-without-authorization-or-approval-as-well-as-documentation-and-reason-for-public-needs">Thou shalt not create public facing infrastructure without authorization or approval (as well as documentation and reason for public needs)</a></li>
    <li><a href="#thou-shalt-not-blindly-grant-administration-privileges-to-any-principal">Thou shalt not blindly grant administration privileges to any principal</a></li>
    <li><a href="#thou-shalt-follow-the-principle-of-least-privilege-when-you-are-deploying-policies-or-permissions">Thou shalt follow the principle of least privilege when you are deploying policies or permissions</a></li>
  </ul>

  <ul>
    <li><a href="#thou-shalt-leverage-key-based-authentication-over-password-based-authentication-if-applicable">Thou shalt leverage key based authentication over password based authentication if applicable</a></li>
    <li><a href="#thou-shalt-not-allow-third-party-access-into-an-environment-without-proper-approval-consent-and-documentation">Thou shalt not allow third party access into an environment without proper approval, consent, and documentation.</a></li>
  </ul>
</nav></div>
            </div>
            <div class="post-toc-mobile" id="post-toc-mobile">
                <details>
                    <summary>
                        <div class="post-toc-title">
                            <span>Contents</span>
                            <span><i class="details icon fas fa-angle-down"></i></span>
                        </div>
                    </summary>
                    <div class="post-toc-content"><nav id="TableOfContentsMobile">
  <ul>
    <li><a href="#preface">Preface</a></li>
    <li><a href="#the-list">The List</a></li>
    <li><a href="#thou-shalt-use-encryption-everywhere">Thou shalt use encryption everywhere.</a></li>
    <li><a href="#thou-shalt-not-create-public-facing-infrastructure-without-authorization-or-approval-as-well-as-documentation-and-reason-for-public-needs">Thou shalt not create public facing infrastructure without authorization or approval (as well as documentation and reason for public needs)</a></li>
    <li><a href="#thou-shalt-not-blindly-grant-administration-privileges-to-any-principal">Thou shalt not blindly grant administration privileges to any principal</a></li>
    <li><a href="#thou-shalt-follow-the-principle-of-least-privilege-when-you-are-deploying-policies-or-permissions">Thou shalt follow the principle of least privilege when you are deploying policies or permissions</a></li>
  </ul>

  <ul>
    <li><a href="#thou-shalt-leverage-key-based-authentication-over-password-based-authentication-if-applicable">Thou shalt leverage key based authentication over password based authentication if applicable</a></li>
    <li><a href="#thou-shalt-not-allow-third-party-access-into-an-environment-without-proper-approval-consent-and-documentation">Thou shalt not allow third party access into an environment without proper approval, consent, and documentation.</a></li>
  </ul>
</nav></div>
                </details>
            </div><div class="post-content"><a class="post-dummy-target" id="preface"></a><h2>Preface</h2>
<p>The following list is my opinion on some of the top cloud controls that should be enabled within your environment. These can be security controls, processes, procedures or systems you create to manage and monitor your resources and users.</p>
<a class="post-dummy-target" id="the-list"></a><h2>The List</h2>
<ol>
<li>Thou shalt use encryption everywhere. If its a checkbox, it gets turned on.</li>
<li>Thou shalt not create public facing infrastructure without authorization or approval</li>
<li>Thou shalt not blindly grant administration privileges to any principal</li>
<li>Thou shalt follow the principle of least privilege when you are deploying policies or permissions</li>
<li>Thou shalt not modify firewall rules to allow for all traffic.</li>
<li>Thou shalt leverage key based authentication over password based authentication if applicable</li>
<li>Thou shalt not allow third party access into an environment without proper approval, consent, and documentation.</li>
</ol>
<a class="post-dummy-target" id="thou-shalt-use-encryption-everywhere"></a><h2>Thou shalt use encryption everywhere.</h2>
<p>Server side encryption in most cloud environments is quite trivial to enabled. Leveraging this is a quick win for most standards including the CIS AWS standard. The issues I‚Äôve encountered with attempting to enable encryption everywhere is working in environments where developers have already had the right to create non-encrypted resources. A quick win for this section would be working with the new environment onboarding team to enable this option by default, or create resource policies and permissions to disallow the creation of unencrypted resources.</p>
<a class="post-dummy-target" id="thou-shalt-not-create-public-facing-infrastructure-without-authorization-or-approval-as-well-as-documentation-and-reason-for-public-needs"></a><h2>Thou shalt not create public facing infrastructure without authorization or approval (as well as documentation and reason for public needs)</h2>
<p>Look at the news, look at the breach report. How many of these are due to public infra. S3 Buckets, Azure Storage, EC2 instances, etc.. No infrastructure should be publicly accessible without proper approval. As an example, S3 buckets do not need to be opened to the internet, If you want to serve static content, use S3 and CloudFront with a web app firewall rule. For this commandment you may want to create a policy that disallows the creation of public infrastructure. Work with information security teams and cloud environment owners.</p>
<a class="post-dummy-target" id="thou-shalt-not-blindly-grant-administration-privileges-to-any-principal"></a><h2>Thou shalt not blindly grant administration privileges to any principal</h2>
<p>We‚Äôve all done this at some time. Somethings not working, you slap an admin policy on a user or role, and then you forget about it (scope creep). Ensure your users do not have the access to do this. If an account with administration rights were to get compromised, you will not be having a good time. My words of advise is to implement a system that revokes administration rights when they are attached to any principal. I‚Äôve done this by creating a lambda that scans all IAM roles and users, if it see‚Äôs a policy with administration rights, it removes it and reports it to the user and the security team.</p>
<a class="post-dummy-target" id="thou-shalt-follow-the-principle-of-least-privilege-when-you-are-deploying-policies-or-permissions"></a><h2>Thou shalt follow the principle of least privilege when you are deploying policies or permissions</h2>
<p>This is similar to the third commandment. I‚Äôve had some hard time defining what least privilege is when I worked for other employers. Is least privilege the implementation of ONLY the specific API‚Äôs, or is it for the implementation of a suite of services / API‚Äôs required to do the job needed. I have done a lot here and in my personal opinion, I believe that creating the policies and permissions for a set of API‚Äôs or services allows for a quick implementation of least privilege. As an example, if I want to setup least privilege for a data analytics team in AWS. I would grant permissions for S3 (only buckets needed), Sage Maker, Glue, KMS (Encrypt/Decrypt), and any other services they would need to do their work. If I was creating a policy for infrastructure teams, I would give them access to manage EC2 instances in the VPC, r/w access to the needed buckets, access to create certain (non administrative) IAM instance profiles, systems manager access and whatever else they may need. I would not give them the PowerUsers policy, although that may be the fastest way, it grants them way more privileges than they need.</p>
<h1 id="thou-shalt-not-modify-firewall-rules-to-allow-for-all-traffic">Thou shalt not modify firewall rules to allow for all traffic.</h1>
<p>This is a personal one for me. I‚Äôve had to deal with a lot of environments where developers had opened security groups open to the internet, while this is not necessarily malicious, it allows for attackers to scan and attempt to brute force access into our environment. To be clear, most developers who do this don‚Äôt do it with malicious intent, normally they need to test to make sure somethings working - or they do this as a troubleshooting step, so don‚Äôt get too upset at the devs.</p>
<a class="post-dummy-target" id="thou-shalt-leverage-key-based-authentication-over-password-based-authentication-if-applicable"></a><h2>Thou shalt leverage key based authentication over password based authentication if applicable</h2>
<p>Password based auth bad. Key based auth good.</p>
<p><a href="https://superuser.com/questions/303358/why-is-ssh-key-authentication-better-than-password-authentication" target="_blank">I‚Äôm going to refer to this stack overflow post.</a>
</p>
<a class="post-dummy-target" id="thou-shalt-not-allow-third-party-access-into-an-environment-without-proper-approval-consent-and-documentation"></a><h2>Thou shalt not allow third party access into an environment without proper approval, consent, and documentation.</h2>
<p>In AWS you can allow any other AWS account with access to your environment through Trusted Roles. Take precaution with leveraging this option. Ensure you have thoroughly vetted the security of the third party, and have signed a proper agreement. Set the permissions or policies on this role to be very restrictive	. The less this role can do, the more minimal the impact if the role was to be leveraged with malicious intent.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>The article was updated on 2020-01-28</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share"><span><a href="//twitter.com/share?url=%2f2020%2f01%2fcsc%2f&amp;text=%f0%9f%99%8f%f0%9f%8f%bc%20Cloud%20Security%20Commandments&amp;via=%40get_sec" target="_blank" title="Share on Twitter">
            <i class="fab fa-twitter fa-fw"></i>
        </a><a href="//www.facebook.com/sharer/sharer.php?u=%2f2020%2f01%2fcsc%2f" target="_blank" title="Share on Facebook">
            <i class="fab fa-facebook-square fa-fw"></i>
        </a><a href="//reddit.com/submit?url=%2f2020%2f01%2fcsc%2f&amp;title=%f0%9f%99%8f%f0%9f%8f%bc%20Cloud%20Security%20Commandments" target="_blank" title="Share on Reddit">
            <i class="fab fa-reddit fa-fw"></i>
        </a></span></div>
        </div>
    </div>

    <div class="post-info-more">
        <section><span class="tag">
                        <a href="/tags/cloud/"><i class="fas fa-tag fa-fw"></i>&nbsp;cloud</a>&nbsp;
                    </span><span class="tag">
                        <a href="/tags/security/"><i class="fas fa-tag fa-fw"></i>&nbsp;security</a>&nbsp;
                    </span><span class="tag">
                        <a href="/tags/policy/"><i class="fas fa-tag fa-fw"></i>&nbsp;policy</a>&nbsp;
                    </span></section>
        <section>
            <span><a href="javascript:window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/2020/01/cross-account-scannin/" class="prev" rel="prev" title="üò® So many AWS accounts, so much information!?"><i class="fas fa-angle-left fa-fw"></i>üò® So many AWS accounts, so much information!?</a></div>
</div>
<div class="post-comment"></div>
    </article></div>
            </main><footer class="footer">
    <div class="copyright"><div class="copyright-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreffer">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a>
        </div>

        <div class="copyright-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2020</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Nathan Getty</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
    </div>
</footer>
</div><a href="#" class="dynamic-to-top" id="dynamic-to-top" data-scroll>
            <span>&nbsp;</span>
        </a><script src="/js/lib/jquery/jquery.slim.min.js"></script><script src="/js/lib/lazysizes/lazysizes.min.js"></script><script src="/js/lib/smooth-scroll/smooth-scroll.polyfills.min.js"></script><script>window.scroll = new SmoothScroll('[data-scroll]', {speed: 300, speedAsDuration: true});</script><link rel="stylesheet" href="/css/lib/katex/katex.min.css"><script src="/js/lib/katex/katex.min.js"></script><script defer src="/js/lib/katex/auto-render.min.js"></script><link rel="stylesheet" href="/css/lib/katex/copy-tex.min.css"><script defer src="/js/lib/katex/copy-tex.min.js"></script><script defer src="/js/lib/katex/mhchem.min.js"></script><script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(document.body, {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "\\(", right: "\\)", display: false },
                    { left: "\\[", right: "\\]", display: true },{ left: "$", right: "$", display: false },]
            });
        });
    </script><script src="/js/blog.min.js"></script>
</body>
</html>
