<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Cloud Security Commandments :: Blog — @me</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Preface The following list is my opinion on some of the top cloud controls that should be enabled within your environment. These can be security controls, processes, procedures or systems you create to manage and monitor your resources and users.
The List  Thou shalt use encryption everywhere. If its a checkbox, it gets turned on. Thou shalt not create public facing infrastructure without authorization or approval Thou shalt not blindly grant administration privileges to any principal Thou shalt follow the principle of least privilege when you are deploying policies or permissions Thou shalt not modify firewall rules to allow for all traffic."/>
<meta name="keywords" content="AWS, Amazon, info, enumeration"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/posts/cloud-security-commandments/" />




<link rel="stylesheet" href="/assets/style.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Cloud Security Commandments :: Blog — @me" />
<meta name="twitter:description" content="Preface The following list is my opinion on some of the top cloud controls that should be enabled within your environment. These can be security controls, processes, procedures or systems you create to manage and monitor your resources and users.
The List  Thou shalt use encryption everywhere. If its a checkbox, it gets turned on. Thou shalt not create public facing infrastructure without authorization or approval Thou shalt not blindly grant administration privileges to any principal Thou shalt follow the principle of least privilege when you are deploying policies or permissions Thou shalt not modify firewall rules to allow for all traffic." />
<meta name="twitter:site" content="/" />
<meta name="twitter:creator" content="Nathan Getty" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Cloud Security Commandments :: Blog — @me">
<meta property="og:description" content="Preface The following list is my opinion on some of the top cloud controls that should be enabled within your environment. These can be security controls, processes, procedures or systems you create to manage and monitor your resources and users.
The List  Thou shalt use encryption everywhere. If its a checkbox, it gets turned on. Thou shalt not create public facing infrastructure without authorization or approval Thou shalt not blindly grant administration privileges to any principal Thou shalt follow the principle of least privilege when you are deploying policies or permissions Thou shalt not modify firewall rules to allow for all traffic." />
<meta property="og:url" content="/posts/cloud-security-commandments/" />
<meta property="og:site_name" content="Cloud Security Commandments" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2020-02-02 11:01:50 -0600 CST" />











</head>
<body class="">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Terminal
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/content/meta/about-me/">About</a></li>
        
      
      
    

    
    <div class="spacer"></div>
    <ul class="language-selector">
      <ul class="language-selector-current">
          <li>English ▾</li>
      </ul>
      <ul class="language-selector__more hidden">
        
      </ul>
    </ul>
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/content/meta/about-me/">About</a></li>
      
    
    
    <hr />
        
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="/posts/cloud-security-commandments/">Cloud Security Commandments</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2020-02-02
    </span>
    
    
    <span class="post-author">::
      Nathan Getty
    </span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="/tags/aws/">AWS</a>&nbsp;
    
    #<a href="/tags/amazon/">Amazon</a>&nbsp;
    
    #<a href="/tags/cloud/">Cloud</a>&nbsp;
    
    #<a href="/tags/security/">security</a>&nbsp;
    
  </span>
  

  

  <div class="post-content"><div>
        <h1 id="preface">Preface<a href="#preface" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>The following list is my opinion on some of the top cloud controls that should be enabled within your environment. These can be security controls, processes, procedures or systems you create to manage and monitor your resources and users.</p>
<h1 id="the-list">The List<a href="#the-list" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<ol>
<li>Thou shalt use encryption everywhere. If its a checkbox, it gets turned on.</li>
<li>Thou shalt not create public facing infrastructure without authorization or approval</li>
<li>Thou shalt not blindly grant administration privileges to any principal</li>
<li>Thou shalt follow the principle of least privilege when you are deploying policies or permissions</li>
<li>Thou shalt not modify firewall rules to allow for all traffic.</li>
<li>Thou shalt leverage key based authentication over password based authentication if applicable</li>
<li>Thou shalt not allow third party access into an environment without proper approval, consent, and documentation.</li>
</ol>
<h1 id="thou-shalt-use-encryption-everywhere">Thou shalt use encryption everywhere.<a href="#thou-shalt-use-encryption-everywhere" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>Server side encryption in most cloud environments is quite trivial to enabled. Leveraging this is a quick win for most standards including the CIS AWS standard. The issues I’ve encountered with attempting to enable encryption everywhere is working in environments where developers have already had the right to create non-encrypted resources. A quick win for this section would be working with the new environment onboarding team to enable this option by default, or create resource policies and permissions to disallow the creation of unencrypted resources.</p>
<h1 id="thou-shalt-not-create-public-facing-infrastructure-without-authorization-or-approval-as-well-as-documentation-and-reason-for-public-needs">Thou shalt not create public facing infrastructure without authorization or approval (as well as documentation and reason for public needs)<a href="#thou-shalt-not-create-public-facing-infrastructure-without-authorization-or-approval-as-well-as-documentation-and-reason-for-public-needs" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>Look at the news, look at the breach report. How many of these are due to public infra. S3 Buckets, Azure Storage, EC2 instances, etc.. No infrastructure should be publicly accessible without proper approval. As an example, S3 buckets do not need to be opened to the internet, If you want to serve static content, use S3 and CloudFront with a web app firewall rule. For this commandment you may want to create a policy that disallows the creation of public infrastructure. Work with information security teams and cloud environment owners.</p>
<h1 id="thou-shalt-not-blindly-grant-administration-privileges-to-any-principal">Thou shalt not blindly grant administration privileges to any principal<a href="#thou-shalt-not-blindly-grant-administration-privileges-to-any-principal" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>We’ve all done this at some time. Somethings not working, you slap an admin policy on a user or role, and then you forget about it (scope creep). Ensure your users do not have the access to do this. If an account with administration rights were to get compromised, you will not be having a good time. My words of advise is to implement a system that revokes administration rights when they are attached to any principal. I’ve done this by creating a lambda that scans all IAM roles and users, if it see’s a policy with administration rights, it removes it and reports it to the user and the security team.</p>
<h1 id="thou-shalt-follow-the-principle-of-least-privilege-when-you-are-deploying-policies-or-permissions">Thou shalt follow the principle of least privilege when you are deploying policies or permissions<a href="#thou-shalt-follow-the-principle-of-least-privilege-when-you-are-deploying-policies-or-permissions" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>This is similar to the third commandment. I’ve had some hard time defining what least privilege is when I worked for other employers. Is least privilege the implementation of ONLY the specific API’s, or is it for the implementation of a suite of services / API’s required to do the job needed. I have done a lot here and in my personal opinion, I believe that creating the policies and permissions for a set of API’s or services allows for a quick implementation of least privilege. As an example, if I want to setup least privilege for a data analytics team in AWS. I would grant permissions for S3 (only buckets needed), Sage Maker, Glue, KMS (Encrypt/Decrypt), and any other services they would need to do their work. If I was creating a policy for infrastructure teams, I would give them access to manage EC2 instances in the VPC, r/w access to the needed buckets, access to create certain (non administrative) IAM instance profiles, systems manager access and whatever else they may need. I would not give them the PowerUsers policy, although that may be the fastest way, it grants them way more privileges than they need.</p>
<h1 id="thou-shalt-not-modify-firewall-rules-to-allow-for-all-traffic">Thou shalt not modify firewall rules to allow for all traffic.<a href="#thou-shalt-not-modify-firewall-rules-to-allow-for-all-traffic" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>This is a personal one for me. I’ve had to deal with a lot of environments where developers had opened security groups open to the internet, while this is not necessarily malicious, it allows for attackers to scan and attempt to brute force access into our environment. To be clear, most developers who do this don’t do it with malicious intent, normally they need to test to make sure somethings working - or they do this as a troubleshooting step, so don’t get too upset at the devs.</p>
<h1 id="thou-shalt-leverage-key-based-authentication-over-password-based-authentication-if-applicable">Thou shalt leverage key based authentication over password based authentication if applicable<a href="#thou-shalt-leverage-key-based-authentication-over-password-based-authentication-if-applicable" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>Password based auth bad. Key based auth good.</p>
<p><a href="https://superuser.com/questions/303358/why-is-ssh-key-authentication-better-than-password-authentication">I’m going to refer to this stack overflow post.</a></p>
<h1 id="thou-shalt-not-allow-third-party-access-into-an-environment-without-proper-approval-consent-and-documentation">Thou shalt not allow third party access into an environment without proper approval, consent, and documentation.<a href="#thou-shalt-not-allow-third-party-access-into-an-environment-without-proper-approval-consent-and-documentation" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p>In AWS you can allow any other AWS account with access to your environment through Trusted Roles. Take precaution with leveraging this option. Ensure you have thoroughly vetted the security of the third party, and have signed a proper agreement. Set the permissions or policies on this role to be very restrictive	. The less this role can do, the more minimal the impact if the role was to be leveraged with malicious intent.</p>

      </div></div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h"></span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      
      <span class="button next">
        <a href="/posts/how-i-made-this-blog/">
          <span class="button__text">How I Made This Blog</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2020 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>





  
</div>

</body>
</html>
